#pass real ip to backend

#on frontend
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

#on backend
set_real_ip_from 192.168.1.2/24;
real_ip_header X-Forwarded-For;

#test config
nginx -t

#reload config
service nginx reload

#deny by ip
location /admin {
  allow 192.168.1.5;
  deny all;
  
  #if getting 404 do this
  try_files $uri $uri/ /index.php?$query_string;
}
